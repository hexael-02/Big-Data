CREATE TABLE Employees (
  employee_id SERIAL PRIMARY KEY,
  first_name VARCHAR(25) NOT NULL,
  last_name VARCHAR(25) NOT NULL,
  hire_date Date DEFAULT CURRENT_DATE,
  job_title VARCHAR(20)
	
);

--run

CREATE TABLE CUSTOMERS (
    customer_id SERIAL PRIMARY KEY,
    first_name varchar(50) NOT NULL,
    last_name varchar (50) not null,
    phone varchar (20),
    email varchar (100) UNIQUE
)

--run

--TABLA VEHICLES (INVENTARIO DE AUTOS)

CREATE TABLE vehicles (
    vehicle_id SERIAL PRIMARY KEY,
    vin VARCHAR (17) UNIQUE NOT NULL, --numero de identificacion del vehiculo
    make VARCHAR (50) NOT NULL,        --marca (e.g., Toyota)
    model VARCHAR (50) NOT NULL,       --modelo (e.g, corolla)
    year INT NOT NULL, 
    color VARCHAR(30),
    sale_price NUMERIC(12, 2) NOT NULL,
    status Varchar(20) DEFAULT 'available' --available, sold, service
)

--run

--TABLA SALES (transacciones)

CREATE TABLE sales (
    sale_id SERIAL PRIMARY KEY,
    vehicle_id INT NOT NULL UNIQUE, --un vehiculo solo puede ser vendido una vez
    customer_id INT NOT NULL,
    employee_id INT NOT NULL,       --vendedor qeu hizo la venta
    sale_date DATE DEFAULT CURRENT_DATE, 
    final_price NUMERIC(12, 2) NOT NULL,
    --claves foraneas:
    CONSTRAINT fk_vehicle
        FOREIGN KEY (vehicle_id)
        REFERENCES vehicles(vehicle_id),
    CONSTRAINT fk_costumer
        FOREIGN KEY (customer_id)
        REFERENCES customers(customer_id),
    CONSTRAINT fk_employees
        FOREIGN KEY (employee_id)
        REFERENCES employees(employee_id)

);

--run

CREATE TABLE services (
    service_id SERIAL PRIMARY KEY,
    vehicle_id int NOT NULL,
    service_date DATE NOT NULL,
    description TEXT,
    cost NUMERIC (10, 2),

    CONSTRAINT fk_vehicle_service
        FOREIGN KEY (vehicle_id)
        REFERENCES vehicles(vehicle_id)
)

--run

--se debe correr la tabla creada antes de empezar a crear otra 



INSERT INTO vehicles (vin, make, model, year, color, sale_price, status) VALUES
      ('1ABCDEFGHIJKLMN01', 'Toyota', 'Corolla', 2020, 'Rojo', 18000.00, 'service'),
      ('2ZYXWVUTSRQPONM02', 'Honda', 'Civic', 2022, 'Azul', 22500.50, 'available'),
      ('3EDCBA98765432103', 'Ford', 'F-150', 2021, 'Blanco', 35000.00, 'available'),
      ('45678901234567894', 'Nissan', 'Kicks', 2023, 'Gris', 20000.00, 'service');

INSERT INTO sales (vehicle_id, customer_id, employee_id, sale_date, final_price) VALUES 
      (1, 1, 1, '2025-11-15', 17500.00),
      (2, 2, 2, '2025-11-15', 22000.00);

INSERT INTO CUSTOMERS (first_name, last_name, phone, email) values
      ('Ana', 'Lopez', '809-555-1234', 'ana.lopez@email.com'),
      ('Carlos', 'Diaz', '829-999-5678', 'carlos.diaz@email.com'),
      ('Elena', 'Vargas', NULL, 'elena.vargas@email.com');

INSERT INTO services (vehicle_id, service_date, description, cost) VALUES
    (3, '2025-10-01', 'Cambio de aceite y filtro de aire.', 85.50),
    (4, '2025-11-18', 'Diagn√≥stico de frenos, reemplazo de pastillas delanteras.', 350.00);

--tener cuidado a la hora de hacer los insert into ya que si una tabla esta tratando de jalar un id que aun no 
se a creado el codigo dara error

--run

--los insert into se pueden ejecutar todos en un mismo bloque de codigo

--SELECT * FROM employees
--SELECT * FROM customers
SELECT * FROM vehicles
--SELECT * FROM services
--SELECT * From sales

--los select se ejutan de uno en uno 

C7J7LWjcXYdPfVqy

sb_publishable_VPrEZ-gR4M2uZ1cd5JBlXA_FywnYH8X

sb_secret_tHNkIdJ-Tw66fEi8nLBOWA_KMXDorYm